## 1.6 싱글톤 레지스트리와 오브젝트 스코프
### 1.6.1 싱글톤 레지스트리로서의 애플리케이션 컨텍스트
애플리케이션 컨텍스트는 IoC 컨테이너이며, 이 애플리케이션 컨텍스트는 싱글톤을 저장하고 관리하는 싱글톤 레지스트리 이기도 하다.
스프링은 기본적으로 별다른 설정을 하지 않으면 내부에서 생성하는 빈 오브젝트는 모두 싱글톤으로 만든다.

#### 왜 스프링은 싱글톤으로 빈을 만드는 것일까?
> 스프링이 주로 적용되는 대상이 자바 엔터프라이즈 기술을 사용하는 서버 환경이다.
> 만약 수백만건의 요청이 발생하는 서비스에 기존 요청마다 인스턴스를 만드는 멀티톤 방식으로 동작한다면, 메모리가 견디지 못하고 장애가 발생할 것이다.
> 그러니 단일 인스턴스를 가지는 싱글톤 패턴을 적용하는 것이다.

#### 싱글톤 패턴의 문제점
* private 생성자를 갖고 있기 때문에 상속할 수 없다.
  * private 생성자를 가진 클래스는 다른 생성자가 없다면 상속이 불가능하다. 객체지향의 장점인 상속과 이를 이용한 당형성을 적용할 수 없다.
* 싱글톤은 테스트하기 힘들다.
* 서버환경에서는 싱글톤이 하나만 만들어지는 것을 보장하지 못한다.
  * 여러 개의 JVM에 분산돼서 설치가 되는 경우에도 각각 독립적으로 오브젝트가 생기기 때문에 싱글톤으로서의 가치가 떨어진다.
* 싱글톤의 사용은 전역 상태를 만들 수 있기 때문에 바람직하지 못하다
  * 언제든지 싱글톤에 쉽게 접근할 수 있기 때문에 애플리케이션 어디서든지 사용될 수 있고, 그러다 보면 자연스럽게 전역 상태로 사용되기 쉽다.

#### 싱글톤 레지스트리
> 자바의 기본적인 싱글톤 패턴의 구현 방식은 여러 가지 단점이 있기 때문에, 스프링은 직접 싱글톤 형태의 오브젝트를 만들고 관리하는 기능을 제공한다. 이것이 싱글톤 레즈스트리 이다. Singleton Registry
* 스프링 컨테이너는 싱글턴 패턴을 적용하지 않아도, 객체 인스턴스를 싱글톤으로 관리한다.
* 스프링 컨테이너에 단일 인스턴스만을 가지는 기능 덕분에 기존의 문제점을 해결하면서 싱글톤으로 유지한다.
* 싱글톤 패턴을 위한 코드가 들어가지 않아도 된다.
* DIP,OCP,테스트,private 생성자로 부터 자유롭게 싱글톤을 사용할 수 있다.

### 1.6.2 싱글톤과 오브젝트의 상태
싱글톤은 멀티스레드 환경이라면 여러 스레드가 동시에 접근해서 사용할 수 있다.
서비스 형태의 오브젝트로 사용되는 경우, 상태정보를 내부에 갖고 있지 않은 무상태 (stateless) 방식으로 만들어져야 한다
싱글톤은 기본적으로 인스턴스 필드의 값을 변경하고 유지하는 상태유지 (stateful) 방식으로 만들지 않는다.

### 1.6.3. 스프링 빈의 스코프
#### 빈의 스코프(scope)
* 스프링이 관리하는 빈(bean) 이 생성되고, 적용되는 범위
* 기본 스코프 - 싱글톤(singleton)
#### 스코프의 종류
* prototype - 빈을 컨테이너에 요청할 때마다 매번 새로운 오브젝트(bean) 생성
* request - HTTP 요청이 생길 때마다 생성됨
* session - 웹의 세션과 라이프 사이클이 거의 동일
