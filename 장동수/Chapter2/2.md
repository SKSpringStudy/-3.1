# 2장 테스트
## 2.1 UserDaoTest 다시 보기
#### 웹을 이용한 테스트
* 웹으로 테스트를 하려면 여러 부가적인 것들을 만들어야한다. 또한 에러가 난다고 해서 그것이 JDBC API 에러인지, SQL 문법 에러인지, 서비스, 컨트롤러 에러인지 알 수 없다.
#### 작은 단위의 테스트
* 한꺼번에 너무 많은 것을 몰아서 테스트하면 오류가 발생했을 때 정확한 원인을 찾기가 힘들어진다. 그래서 작은 단위의 테스트를 한다. Unit Test라고 함.
#### 자동수행 테스트 코드
* 테스트 자체가 사람의 수작업을 거치는 방법을 사용하기보다는 코드로 만들어져서 자동으로 수행될수 있어야 한다.
## 2.2 UserDaoTest 개선
#### 테스트 실패의 두 가지 결과
* 테스트가 진행되는 동안에 에러가 발생하여 실패하는 경우
* 테스트 작업 중에 에러가 발생하지 않았지만 그 결과가 기대한 것과 다르게 나오는 경우
#### JUnit 프레임워크가 요구하는 조건 두 가지
* 메소드가 Public으로 선언되어야 하는 것
* 메소드에 @Test라는 애노테이션 붙여주기
## 2.3 개발자를 위한 테스팅 프레임워크 JUnit
#### 단위 테스트 일관성
> 단위 테스트는 항상 일관성 있는 결과가 보장돼야 한다는 점, DB에 남아 있는 데이터와 같은 외부 환경에 영향을 받지 말아야 함. 테스트를 실행하는 순서를 바꿔도 동일한 결과가 보장되도록 만들어야 함.
#### JUnit 작동 과정
1. 테스트 클래스에서 @Test가 붙은 public이고 void형이며 파라미터가 없는 테스트 메소드를 모두 찾는다.
2. 테스트 클래스의 오브젝트를 하나 만든다.
3. @Before가 붙은 메소드가 있으면 실행한다.
4. @Test가 붙은 메소드를 하나 호출하고 테스트 결과를 저장해둔다.
5. @After가 붙은 메소드가 있으면 실행한다.
6. 나머지 테스트 메소드에 대해 2~5번을 반복한다.
7. 모든 테스트의 결과를 종합해서 돌려준다.
#### 기억해야 할 부분
> 각 테스트 메소드를 실행할 때마다 테스트 클래스의 오브젝트를 새로 만든다는 점. 한번 만들어진 테스트 클래스의 오브젝트는 하나의 테스트 메소드를 사용하고 나면 버려진다.
#### 픽스처
> 테스트를 수행하는 데 필요한 정보나 오브젝트 ex) UserDaoTest에서 dao
## 2.4 스프링 테스트 적용
* 실제 스프링 테스트는 ApplicationContext 생성하는 비용 크다. >>> 재사용 필요.
#### 인터페이스를 두고 DI를 적용해야 하는 이유
* 클래스 대신 인터페이스를 사용하고, new를 이용해 생성하는 대신 DI를 통해 주입받게 하는 건 아주 단순하고 쉬운 작업.
* 클래스의 구현 방식은 바뀌지 않는다고 하더라도 인터페이스를 두고 DI를 적용하게 해두면 다른 차원의 서비스 기능을 도입할 수 있음.
* DI는 테스트가 작은 단위의 대상에 대해 독립적으로 만들어지고 실행되게 한느 데 중요한 역할을 함.
#### @DirtiesContext
> 스프링의 테스트 컨텍스트 프레임워크에게 해당 클래스의 테스트에서 애플리케이션 컨텍스트의 상태를 변경한다는 것을 알려준다.
## 2.5 학습 테스트로 배우는 스프링
* 본인이 만든 코드가 아닌, 다른 사람의 코드에 대해서 테스트 코드를 작성하는 것
#### 학습 테스트의 장점
* 다양한 조건에 따른 기능을 손쉽게 확인해볼 수 있다.
* 학습 테스트 코드를 개발 중에 참고할 수 있다.
* 프레임워크나 제품을 업그레이드할 때 호환성 검증을 도와준다.
* 테스트 작성에 대한 좋은 훈련이 된다.
* 새로운 기술을 공부하는 과정이 즐거워진다.


